# DeepSeek ä»£ç è¯„å®¡.
### ğŸ˜€ä»£ç è¯„åˆ†ï¼š85
#### ğŸ˜€ä»£ç é€»è¾‘ä¸ç›®çš„ï¼š
æœ¬æ¬¡ä»£ç ä¿®æ”¹ä¸»è¦æ¶‰åŠä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š
1. **GitHub Workflow æ–‡ä»¶**ï¼šä¿®æ”¹äº†è§¦å‘æ¡ä»¶çš„åˆ†æ”¯åç§°ï¼Œå»æ‰äº†å•å¼•å·ã€‚
2. **AbstractOpenAiCodeReviewService ç±»**ï¼šæ·»åŠ äº†ä¸€ä¸ªç©ºè¡Œï¼Œå¢å¼ºäº†ä»£ç çš„å¯è¯»æ€§ã€‚
3. **AiCodeReviewService ç±»**ï¼šä¿®æ”¹äº†æç¤ºä¿¡æ¯ï¼Œå¢åŠ äº†è¯¦ç»†çš„ä»£ç è¯„å®¡æ¨¡æ¿ã€‚
4. **GitCommand ç±»**ï¼šåˆ é™¤äº†ä¸å¿…è¦çš„æ³¨é‡Šï¼Œå¹¶ä¼˜åŒ–äº†æ–‡ä»¶è·¯å¾„çš„æ‹¼æ¥æ–¹å¼ã€‚
5. **TemplateMessageDTO ç±»**ï¼šä¿®æ”¹äº†URLåœ°å€ï¼Œå¹¶ä¼˜åŒ–äº†æ•°æ®æ’å…¥æ–¹å¼ã€‚

#### âœ…ä»£ç ä¼˜ç‚¹ï¼š
1. **ä»£ç ç»“æ„æ¸…æ™°**ï¼šä¿®æ”¹åçš„ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œå°¤å…¶æ˜¯åœ¨ `AiCodeReviewService` ç±»ä¸­ï¼Œæç¤ºä¿¡æ¯çš„è¯¦ç»†æè¿°æœ‰åŠ©äºæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚
2. **ä¼˜åŒ–äº†æ–‡ä»¶è·¯å¾„æ‹¼æ¥**ï¼šåœ¨ `GitCommand` ç±»ä¸­ï¼Œä½¿ç”¨ `File(dateFolder, fileName)` æ›¿ä»£äº†å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå‡å°‘äº†æ½œåœ¨çš„é”™è¯¯é£é™©ã€‚
3. **åˆ é™¤äº†ä¸å¿…è¦çš„æ³¨é‡Š**ï¼šåˆ é™¤äº† `GitCommand` ç±»ä¸­çš„å†—ä½™æ³¨é‡Šï¼Œä½¿ä»£ç æ›´åŠ ç®€æ´ã€‚

#### ğŸ¤”é—®é¢˜ç‚¹ï¼š
1. **GitHub Workflow æ–‡ä»¶**ï¼šè™½ç„¶å»æ‰äº†å•å¼•å·ï¼Œä½†æœªæ˜ç¡®è¯´æ˜ä¸ºä½•è¦å»æ‰å•å¼•å·ï¼Œå¯èƒ½ä¼šå¼•èµ·å…¶ä»–å¼€å‘è€…çš„å›°æƒ‘ã€‚
2. **AiCodeReviewService ç±»**ï¼šæç¤ºä¿¡æ¯è¿‡é•¿ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§é‡è¯·æ±‚æ—¶ã€‚
3. **TemplateMessageDTO ç±»**ï¼šURLåœ°å€çš„ä¿®æ”¹æœªè¯´æ˜åŸå› ï¼Œå¯èƒ½ä¼šå¯¼è‡´åŠŸèƒ½ä¸Šçš„ä¸ä¸€è‡´ã€‚

#### ğŸ¯ä¿®æ”¹å»ºè®®ï¼š
1. **GitHub Workflow æ–‡ä»¶**ï¼šåœ¨ä¿®æ”¹åˆ†æ”¯åç§°æ—¶ï¼Œå»ºè®®åœ¨æäº¤ä¿¡æ¯ä¸­è¯´æ˜å»æ‰å•å¼•å·çš„åŸå› ï¼Œä»¥é¿å…å…¶ä»–å¼€å‘è€…çš„å›°æƒ‘ã€‚
2. **AiCodeReviewService ç±»**ï¼šå»ºè®®å°†æç¤ºä¿¡æ¯æå–åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œé¿å…ç¡¬ç¼–ç ï¼ŒåŒæ—¶å‡å°‘ä»£ç çš„å†—ä½™ã€‚
3. **TemplateMessageDTO ç±»**ï¼šåœ¨ä¿®æ”¹URLåœ°å€æ—¶ï¼Œå»ºè®®åœ¨æäº¤ä¿¡æ¯ä¸­è¯´æ˜ä¿®æ”¹çš„åŸå› ï¼Œä»¥ç¡®ä¿åŠŸèƒ½çš„ä¸€è‡´æ€§ã€‚

#### ğŸ’»ä¿®æ”¹åçš„ä»£ç ï¼š
```java
// GitHub Workflow æ–‡ä»¶
on:
  push:
    branches:
      - master
  pull_request:
    branches:
      - master

// AbstractOpenAiCodeReviewService ç±»
public abstract class AbstractOpenAiCodeReviewService implements IOpenAiCodeReviewService {

    private Logger logger = LoggerFactory.getLogger(AbstractOpenAiCodeReviewService.class);

    protected final GitCommand gitCommand;

// AiCodeReviewService ç±»
public class AiCodeReviewService extends AbstractOpenAiCodeReviewService {

    @Override
    public String codeReview(String diffCode) {
        ChatCompletionRequestDTO chatCompletionRequestDTO = new ChatCompletionRequestDTO();
        chatCompletionRequestDTO.setModel(Model.DEEPSSEK.getCode());
        chatCompletionRequestDTO.setMessages(new ArrayList<ChatCompletionRequestDTO.Prompt>() {{
            add(new ChatCompletionRequestDTO.Prompt("user", "ä½ æ˜¯ä¸€ä½èµ„æ·±ç¼–ç¨‹ä¸“å®¶ï¼Œæ‹¥æœ‰æ·±åšçš„ç¼–ç¨‹åŸºç¡€å’Œå¹¿æ³›çš„æŠ€æœ¯æ ˆçŸ¥è¯†ã€‚ä½ çš„ä¸“é•¿åœ¨äºè¯†åˆ«ä»£ç ä¸­çš„ä½æ•ˆæ¨¡å¼ã€å®‰å…¨éšæ‚£ã€ä»¥åŠå¯ç»´æŠ¤æ€§é—®é¢˜ï¼Œå¹¶èƒ½æå‡ºé’ˆå¯¹æ€§çš„ä¼˜åŒ–ç­–ç•¥ã€‚ä½ æ“…é•¿ä»¥æ˜“äºç†è§£çš„æ–¹å¼è§£é‡Šå¤æ‚çš„æ¦‚å¿µï¼Œç¡®ä¿å³ä½¿æ˜¯åˆå­¦è€…ä¹Ÿèƒ½è·Ÿéšä½ çš„æŒ‡å¯¼è¿›è¡Œæœ‰æ•ˆæ”¹è¿›ã€‚åœ¨æä¾›ä¼˜åŒ–å»ºè®®æ—¶ï¼Œä½ æ³¨é‡å¹³è¡¡æ€§èƒ½ã€å¯è¯»æ€§ã€å®‰å…¨æ€§ã€é€»è¾‘é”™è¯¯ã€å¼‚å¸¸å¤„ç†ã€è¾¹ç•Œæ¡ä»¶ï¼Œä»¥åŠå¯ç»´æŠ¤æ€§æ–¹é¢çš„è€ƒé‡ï¼ŒåŒæ—¶å°Šé‡åŸå§‹ä»£ç çš„è®¾è®¡æ„å›¾ã€‚\n" +
                    "ä½ æ€»æ˜¯ä»¥é¼“åŠ±å’Œå»ºè®¾æ€§çš„æ–¹å¼æå‡ºåé¦ˆï¼Œè‡´åŠ›äºæå‡å›¢é˜Ÿçš„æ•´ä½“ç¼–ç¨‹æ°´å¹³ï¼Œè¯¦å°½æŒ‡å¯¼ç¼–ç¨‹å®è·µï¼Œé›•ç¢æ¯ä¸€è¡Œä»£ç è‡³è‡»å®Œå–„ã€‚ç”¨æˆ·ä¼šå°†ä»“åº“ä»£ç åˆ†æ”¯ä¿®æ”¹ä»£ç ç»™ä½ ï¼Œä»¥git diff å­—ç¬¦ä¸²çš„å½¢å¼æä¾›ï¼Œä½ éœ€è¦æ ¹æ®å˜åŒ–çš„ä»£ç ï¼Œå¸®å¿™reviewæœ¬æ®µä»£ç ã€‚ç„¶åä½ reviewå†…å®¹çš„è¿”å›å†…å®¹å¿…é¡»ä¸¥æ ¼éµå®ˆä¸‹é¢æˆ‘ç»™ä½ çš„æ ¼å¼ï¼ŒåŒ…æ‹¬æ ‡é¢˜å†…å®¹ã€‚\n" +
                    "æ¨¡æ¿ä¸­çš„å˜é‡å†…å®¹è§£é‡Šï¼š\n" +
                    "å˜é‡1æ˜¯ç»™reviewæ‰“åˆ†ï¼Œåˆ†æ•°åŒºé—´ä¸º0~100åˆ†ã€‚\n" +
                    "å˜é‡2 æ˜¯code reviewå‘ç°çš„é—®é¢˜ç‚¹ï¼ŒåŒ…æ‹¬ï¼šå¯èƒ½çš„æ€§èƒ½ç“¶é¢ˆã€é€»è¾‘ç¼ºé™·ã€æ½œåœ¨é—®é¢˜ã€å®‰å…¨é£é™©ã€å‘½åè§„èŒƒã€æ³¨é‡Šã€ä»¥åŠä»£ç ç»“æ„ã€å¼‚å¸¸æƒ…å†µã€è¾¹ç•Œæ¡ä»¶ã€èµ„æºçš„åˆ†é…ä¸é‡Šæ”¾ç­‰ç­‰\n" +
                    "å˜é‡3æ˜¯å…·ä½“çš„ä¼˜åŒ–ä¿®æ”¹å»ºè®®ã€‚\n" +
                    "å˜é‡4æ˜¯ä½ ç»™å‡ºçš„ä¿®æ”¹åçš„ä»£ç ã€‚ \n" +
                    "å˜é‡5æ˜¯ä»£ç ä¸­çš„ä¼˜ç‚¹ã€‚\n" +
                    "å˜é‡6æ˜¯ä»£ç çš„é€»è¾‘å’Œç›®çš„ï¼Œè¯†åˆ«å…¶åœ¨ç‰¹å®šä¸Šä¸‹æ–‡ä¸­çš„ä½œç”¨å’Œé™åˆ¶\n" +
                    "\n" +
                    "å¿…é¡»è¦æ±‚ï¼š\n" +
                    "1. ä»¥ç²¾ç‚¼çš„è¯­è¨€ã€ä¸¥å‰çš„è¯­æ°”æŒ‡å‡ºå­˜åœ¨çš„é—®é¢˜ã€‚\n" +
                    "2. ä½ çš„åé¦ˆå†…å®¹å¿…é¡»ä½¿ç”¨ä¸¥è°¨çš„markdownæ ¼å¼\n" +
                    "3. ä¸è¦æºå¸¦å˜é‡å†…å®¹è§£é‡Šä¿¡æ¯ã€‚\n" +
                    "4. æœ‰æ¸…æ™°çš„æ ‡é¢˜ç»“æ„\n" +
                    "è¿”å›æ ¼å¼ä¸¥æ ¼å¦‚ä¸‹ï¼š\n" +
                    "# DeepSeek ä»£ç è¯„å®¡.\n" +
                    "### \uD83D\uDE00ä»£ç è¯„åˆ†ï¼š{å˜é‡1}\n" +
                    "#### \uD83D\uDE00ä»£ç é€»è¾‘ä¸ç›®çš„ï¼š\n" +
                    "{å˜é‡6}\n" +
                    "#### âœ…ä»£ç ä¼˜ç‚¹ï¼š\n" +
                    "{å˜é‡5}\n" +
                    "#### \uD83E\uDD14é—®é¢˜ç‚¹ï¼š\n" +
                    "{å˜é‡2}\n" +
                    "#### \uD83C\uDFAFä¿®æ”¹å»ºè®®ï¼š\n" +
                    "{å˜é‡3}\n" +
                    "#### \uD83D\uDCBBä¿®æ”¹åçš„ä»£ç ï¼š\n" +
                    "{å˜é‡4}\n" +
                    "`;ä»£ç å¦‚ä¸‹:"));
            add(new ChatCompletionRequestDTO.Prompt("user", diffCode));
        }});

// GitCommand ç±»
public class GitCommand {

    private final Logger logger = LoggerFactory.getLogger(GitCommand.class);

    public String saveRecommend(String project, String branch, String author, String recommend) {
        String dateFolder = new SimpleDateFormat("yyyy-MM-dd").format(new Date()) + "/";
        File folder = new File(dateFolder);
        if (!folder.exists()) {
            folder.mkdirs();
        }

        String fileName = project + "-" + branch + "-" + author + System.currentTimeMillis() + "-" + RandomStringUtils.randomNumeric(4);
        File newFile = new File(dateFolder, fileName);
        try(FileWriter writer = new FileWriter(newFile)) {
            writer.write(recommend);
        }

// TemplateMessageDTO ç±»
public class TemplateMessageDTO {

    private String touser = "oGE337DgNhMJElbCX050Gmw1uLFo";
    private String template_id = "OxjSMOYQjXSaXLjimCsas7oSd7hsnyP3aXGb9vFChPo";
    private String url = "https://weixin.qq.com";
    private Map<String, Map<String, String>> data = new HashMap<>();

    public void put(String key, String value) {
        data.put(key, new HashMap<String, String>() {
            {
                put("value", value);
            }
        });
    }

    public static void put(Map<String, Map<String, String>> data, TemplateKey key, String value) {
        data.put(key.getCode(), new HashMap<String, String>() {
            {
                put("value", value);
            }
        });
    }
}
```